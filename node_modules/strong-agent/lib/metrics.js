// Copyright IBM Corp. 2015. All Rights Reserved.
// Node module: strong-agent
// US Government Users Restricted Rights - Use, duplication or disclosure
// restricted by GSA ADP Schedule Contract with IBM Corp.

'use strict';

var metrics = null;

exports.poll = function() {
  var snapshot = metrics;
  metrics = null;
  return snapshot;
};

exports.add = function(name, value) {
  if (metrics == null) {
    // Users can add their own metrics; we need a prototype-less dictionary
    // to store them or a metric like '__proto__' would cause issues.
    metrics = Object.create(null);
  }
  metrics[name] = value;
};
